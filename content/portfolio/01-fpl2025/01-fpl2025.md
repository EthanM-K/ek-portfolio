---
date: '2025-09-01T08:31:37-05:00'
draft: true
title: 'Fork Proof Load Control System Redesign (2025)'
weight: 1
---

## Project Background

There were multiple factors at play that led to this project:
* Due to learnings from the [Fork Proof Load Data Analysis](/../portfolio/03-fpldata2024/03-fpldata2024) there was a desire to reprogram the control system to have a more robust data capture, storage, and upload system. 
* Although the electrical redesign accomplished during [Fork Proof Load Electrical Redesign (2023-2024)](/../portfolio/04-fpl2023/04-fpl2023) was a major improvement over [Fork Proof Load Mechanical Redesign (2021)](/../portfolio/07-fpl2021/07-fpl2021), and achieved the goals of the project within the constraints of the project (i.e. utilizing the existing Horner Control System and LabVIEW PC program), the end result was electrically complicated. A simpler electrical design was needed for ease of assembly and future maintenance efforts. 
* The recent decision to move to [Beckhoff](/../portfolio/09-operations/beckhoff-transition/beckhoff-transition) as our control system platform showed there were new opportunities that came from that system that would alleviate many issues within the FPL control system design
* A new supplier factory was opening which required a solution quickly

The machine needed to be assembled quickly, but also needed upgrades to the control system because we did not want to risk any more data errors with any more machines due to their importance. The decision was made to refurbish an existing prototype of the FPL machine and retrofit a new control system onto the framework.

I was the project lead and responsible for **project management**, **mechanical component design**, **mechanical assembly design**, **control system design**, and **electrical design**. 

## Project Features

#### Framework Retrofit / Refurbishment

The weldment framework that was used in the project did not have any 3D CAD or 2D drawings. The frame had to be **reverse engineered** and recreated in **Onshape**. The framework was modified as well and painted. Existing clamp subassembly components needed to be modified and new **mechanical drawings** were created indicating the required modifications. New **sheet metal** parts were designed to create safety guarding as well as mounting points for control system pneumatic components. 

#### Electrical System Redesign

The electrical system was vastly simplified from the [2023 design](/../portfolio/04-fpl2023/04-fpl2023). Moving to a modern control system allowed us to take advantage of fieldbus IO boxes, and since we were using **Beckhoff** we used **EtherCAT** field IO boxes. Digital IO, analog IO, and **IO Link** were utilized in the project. The HMI was simplified to a single screen which can smoothly scale from 1-4 stations depending on the machine configuration. All sensors connect directly to a field IO box, with a single cable which travels back to the control panel via the EtherCAT P standard.

#### Control System Redesign
The control system was completely migrated from Horner and LabVIEW to Beckhoff. It was programmed in **IEC 61131-3 Stuctured Text** with additional modules from Beckhoff libraries. The project was version managed with **git**. The control system controlled a Festo CPX unit over **EtherCAT**, communicated with **displacement transducers** via **IO Link**, controlled Zebra Barcode Scanners via **TCP/IP**, and communicated with tulip.co to query and upload data via a **HTTPS REST API**.

#### Integration with Existing Tulip-powered Database
Because we were already using tulip.co for the [Test Database and Applications (2021-2023)](/../portfolio/08-tulip2021/08-tulip2021) project we decided to create a database of fork proof load data in Tulip as well. A new database within Tulip was designed for Fork Proof Load data, and the **REST API** was chosen as the communication method, although **MQTT** and **OPC UA** were considered as well.

#### Pneumatic Circuit Redesign
The pneumatic circuitry in FPL2023 involved 5 separate pneumatic valves for each station, four to control the load cylinder and one 5/3 valve to control the clamp cylinder. Working with a supplier of Festo systems a single CPX/MPA Festo valve assembly was specified with a single VPPM pressure control valve, a 5/3 valve to control air into the VPPM and expansion of the load cylinder, and a 5/3 valve to control the clamp cylinder. The CPX was specified with EtherCAT to again simplify the electrical design requirements. 

